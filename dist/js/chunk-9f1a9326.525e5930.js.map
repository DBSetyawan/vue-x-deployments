{"version":3,"sources":["webpack:///./src/utils/crud/components/field-types/components/FieldWrapper.vue?279c","webpack:///src/utils/crud/components/field-types/components/FieldWrapper.vue","webpack:///./src/utils/crud/components/field-types/components/FieldWrapper.vue?a72f","webpack:///./src/utils/crud/components/field-types/components/FieldWrapper.vue?b66a","webpack:///./src/utils/crud/components/field-types/File.vue?e241","webpack:///src/utils/crud/components/field-types/File.vue","webpack:///./src/utils/crud/components/field-types/File.vue?d1f1","webpack:///./src/utils/crud/components/field-types/File.vue?44d9","webpack:///./src/utils/crud/components/field-types/File.vue?8c36","webpack:///./src/utils/crud/components/field-types/components/FieldWrapper.vue?4f7b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","label","_t","staticRenderFns","name","props","component","attrs","class","fileUploadBtn","uploadStatus","uploadLoader","$t","fileUploadIcon","ref","field","disabled","on","$event","fileSelected","rules","text","filename","components","FieldWrapper","file","undefined","computed","fieldType","JSON","parse","e","methods","$emit","status","btnClasses","ready","success","error","icons","target","files","formData","FormData","append","prefix","path","column","$http","post","uploadPath","then","response","body","stringify","mime","type","size","uploaded","openAlertBox","msg","watch","value","immediate","val","reload","setTimeout","VBtn","VCol","VIcon","VRow","VTextField"],"mappings":"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","file":"js/chunk-9f1a9326.525e5930.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field-wrapper\"},[_c('label',{staticClass:\"field-wrapper__label\"},[_vm._v(\"\\n    \"+_vm._s(_vm.label)+\"\\n  \")]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"field-wrapper\">\n    <label class=\"field-wrapper__label\">\n      {{ label }}\n    </label>\n    <slot />\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'FieldWrapper',\n  props: ['label'],\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.field-wrapper {\n  margin-top: 10px;\n  &__label {\n    font-size: 12px;\n    color: #777;\n  }\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldWrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldWrapper.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FieldWrapper.vue?vue&type=template&id=5037099b&scoped=true&\"\nimport script from \"./FieldWrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./FieldWrapper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FieldWrapper.vue?vue&type=style&index=0&id=5037099b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5037099b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('field-wrapper',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"5\"}},[_c('v-btn',{staticClass:\"jbtn-file\",class:_vm.fileUploadBtn(_vm.uploadStatus),attrs:{\"loading\":_vm.uploadLoader,\"dark\":\"\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('global.details.files.upload'))+\"\\n        \"),_c('v-icon',{attrs:{\"dark\":\"\",\"right\":\"\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.fileUploadIcon(_vm.uploadStatus))+\"\\n        \")]),_c('input',{ref:\"fileInput\",attrs:{\"id\":_vm.field.name,\"multiple\":false,\"disabled\":_vm.field.disabled,\"type\":\"file\",\"accept\":\"*\"},on:{\"change\":function($event){return _vm.fileSelected($event, _vm.field)}}})],1)],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"7\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules,\"label\":_vm.field.text,\"value\":_vm.filename,\"disabled\":\"\",\"hide-details\":\"\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <field-wrapper>\n    <v-row dense>\n      <v-col\n        cols=\"12\"\n        sm=\"5\"\n      >\n        <v-btn\n          :loading=\"uploadLoader\"\n          :class=\"fileUploadBtn(uploadStatus)\"\n          class=\"jbtn-file\"\n          dark\n        >\n          {{ $t('global.details.files.upload') }}\n          <v-icon\n            dark\n            right\n          >\n            {{ fileUploadIcon(uploadStatus) }}\n          </v-icon>\n          <input\n            :id=\"field.name\"\n            :multiple=\"false\"\n            :disabled=\"field.disabled\"\n            type=\"file\"\n            accept=\"*\"\n            ref=\"fileInput\"\n            @change=\"fileSelected($event, field)\"\n          />\n        </v-btn>\n      </v-col>\n      <v-col\n        cols=\"12\"\n        sm=\"7\"\n      >\n        <v-text-field\n          :rules=\"rules\"\n          :label=\"field.text\"\n          :value=\"filename\"\n          disabled\n          hide-details\n        ></v-text-field>\n      </v-col>\n    </v-row>\n  </field-wrapper>\n</template>\n<script>\n\nimport {\n  mapState,\n  mapGetters,\n} from 'vuex'\n\nimport FieldWrapper from './components/FieldWrapper.vue'\n\nexport default {\n  name: 'FileField',\n  components: {\n    FieldWrapper,\n  },\n  props: [\n    'value',\n    'fieldType',\n    'field',\n    'rules',\n  ],\n  data () {\n    return {\n      file: undefined,\n      uploadStatus: 'ready',\n      uploadLoader: false,\n    }\n  },\n  computed: {\n    ...mapState('crud', [\n      'details',\n      'path',\n      'prefix',\n    ]),\n    ...mapGetters('crud', ['uploadPath']),\n    filename () {\n      let filename\n      if (this.fieldType === 'file' && this.file !== undefined && this.file !== null) {\n        try {\n          filename = JSON.parse(this.file).filename\n        } catch (e) {\n          return ''\n        }\n      }\n      return filename\n    },\n  },\n  methods: {\n    onBlur () {\n      this.$emit('input', this.text)\n      this.$emit('change')\n    },\n    fileUploadBtn (status) {\n      const btnClasses = {\n        ready: 'primary',\n        success: 'success',\n        error: 'error',\n      }\n      return btnClasses[status]\n    },\n    fileUploadIcon (status) {\n      const icons = {\n        ready: 'save_alt',\n        success: 'check',\n        error: 'close',\n      }\n      return icons[status]\n    },\n    fileSelected (e, field) {\n      const file = e.target.files[0]\n      if (file) {\n        this.uploadLoader = true\n        const formData = new FormData()\n        formData.append('file', file)\n        formData.append('module', this.prefix)\n        formData.append('table', this.path)\n        formData.append('field', field.column)\n        this.$http.post(this.uploadPath, formData, {}).then(\n          (response) => {\n            if (response.body.status === 0) {\n              this.file = JSON.stringify({\n                filename: file.name,\n                mime: file.type,\n                size: file.size,\n                path: response.body.path,\n                uploaded: 1,\n              })\n              this.$emit('input', this.file)\n              this.uploadStatus = 'success'\n            } else {\n              this.uploadStatus = 'error'\n              if (response.body.status === -1) {\n                this.openAlertBox([\n                  'alertError',\n                  response.body.msg,\n                ])\n              } else if (response.body.status === -2) {\n                this.openAlertBox([\n                  'alertValidationError',\n                  response.body.msg,\n                ])\n              }\n            }\n            this.uploadLoader = false\n          },\n          () => {\n            this.uploadLoader = false\n            this.uploadStatus = 'error'\n          },\n        )\n      }\n    },\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler (val) {\n        this.file = val\n      },\n    },\n    reload: function (val) {\n      if (val) {\n        this.uploadLoader = false\n        this.uploadStatus = 'ready'\n      }\n    },\n    uploadStatus: function (val) {\n      if (val !== 'ready') {\n        setTimeout(() => {\n          this.uploadStatus = 'ready'\n        }, 1000)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.jbtn-file {\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  margin: 0px;\n  width: 100%;\n}\n.jbtn-file input[type='file'] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  min-width: 100%;\n  min-height: 100%;\n  font-size: 100px;\n  text-align: right;\n  filter: alpha(opacity=0);\n  opacity: 0;\n  outline: none;\n  cursor: inherit;\n  display: block;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./File.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./File.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./File.vue?vue&type=template&id=abba0504&scoped=true&\"\nimport script from \"./File.vue?vue&type=script&lang=js&\"\nexport * from \"./File.vue?vue&type=script&lang=js&\"\nimport style0 from \"./File.vue?vue&type=style&index=0&id=abba0504&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abba0504\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VIcon,VRow,VTextField})\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./File.vue?vue&type=style&index=0&id=abba0504&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./File.vue?vue&type=style&index=0&id=abba0504&lang=scss&scoped=true&\"","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldWrapper.vue?vue&type=style&index=0&id=5037099b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FieldWrapper.vue?vue&type=style&index=0&id=5037099b&lang=scss&scoped=true&\""],"sourceRoot":""}